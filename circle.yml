machine:
  services:
    - docker
dependencies:
  override:
    - docker build -t infinispan724 infinispan-7.2.4.Final/
    - docker build -t infinispan725 infinispan-7.2.5.Final/
    - docker build -t infinispan8 infinispan-8.0.0.Final/
    - docker build -t infinispan801 infinispan-8.0.1.Final/
    - docker build -t infinispan802 infinispan-8.0.2.Final/
    - docker build -t infinispan810 infinispan-8.1.0.Final/
    - docker build -t infinispan .
test:
  override:
    - docker run --name infinispan_container724 -p 8080:8080 -p 9990:9990 -dt infinispan724; sleep 20
    - curl -v http://localhost:8080
    - docker run --name infinispan_container725 -p 8080:8080 -p 9990:9990 -dt infinispan725; sleep 20
    - curl -v http://localhost:8080
    - docker run --name infinispan_container8 -p 8080:8080 -p 9990:9990 -dt infinispan8; sleep 20
    - curl -v http://localhost:8080
    - docker run --name infinispan_container801 -p 8080:8080 -p 9990:9990 -dt infinispan801; sleep 20
    - curl -v http://localhost:8080
    - docker run --name infinispan_container802 -p 8080:8080 -p 9990:9990 -dt infinispan802; sleep 20
    - curl -v http://localhost:8080
    - docker run --name infinispan_container810 -p 8080:8080 -p 9990:9990 -dt infinispan810; sleep 20
    - curl -v http://localhost:8080
    - docker run --name infinispan_container -p 8080:8080 -p 9990:9990 -dt infinispan; sleep 20
    - curl -v http://localhost:8080


